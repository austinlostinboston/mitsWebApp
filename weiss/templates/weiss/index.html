{% extends "weiss/scrollDownBase.html" %}


<!-- Response Input -->

{% block content %}
<h1 align="center">Welcome to Weiss, the bot with an opinion!</h1>
<div>
    {% for line in dialog reversed %}
    <div>
        <div class="well well-lg dialogbox" style="float:left" >
            {{ line.query }}
        </div>
        <div style="clear:both"></div>
    </div>
    <div style="float:right">
      {% if forloop.last %}
      <!-- Single button -->
      <div align="right" class="btn-group">
        <form method="POST" action="confirmaction">
          <button type="submit" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Intended Action <span class="caret"></span>
          </button>
          <ul name="aid" class="dropdown-menu">
            {% for aid, name in actions %}
            <!--from context dict, use keyname = aid to grabe value-->
            <!-- <li value="{{ aid }}">{{ name }}</li> -->
            <li aid="{{ aid }}"><a href="#">{{ name }}</a></li>
            {% endfor%}
          </ul>
        </form>
      </div>
      {% endif %}

      <div class="well well-lg dialogbox" style="float:right" >
        {{ line.response }}
      </div>

      <div style="clear:both"></div>
    </div>
    {% endfor %}
</div>
<br>

<!-- Query Input -->
<div class="col-lg-12 padding">
    <form method="post" action="/" name="action">
        <div class="input-group">
            <input type="text" class="form-control input-lg" placeholder="Ask Weiss about Movies, Restaurants, News, or just have a chat!" name="queryinput" value="{{ queryinput }}">
            <input type="hidden" name="aid" value="0">
            {% csrf_token %}
            <div class="input-group-btn" >
                 <button type="submit" class="btn btn-default input-lg " aria-expanded="false">Ask Weiss!</button>
            </div><!-- /btn-group -->
        </div>
    </form>
</div>

<script>
$(".dropdown-menu li a").click(function(){
        //var selText = $(this).text();
        var aid = $(this).parent().attr('aid');
        $("#aid").val(aid);
        //var text = $("#actioninput").val();
        $("#form").submit();
        //$(this).parents('.input-group-btn').find('.dropdown-toggle').html(selText+' <span class="caret"></span>');
        window.scrollTo(0,document.body.scrollHeight);
        });
</script>
{% endblock %}


